import{a as N}from"./chunk-UYRZWSBY.js";import{a as j}from"./chunk-UGMLWX3L.js";import{a as F}from"./chunk-JXUMRTRX.js";import{$ as S,H as M,I as O,J as x,K as k,L as y,M as s,N as c,O as o,P as u,R as C,S as w,V as d,W as g,X as l,_ as I,aa as E,fa as T,ja as D,q as h,qa as z,u as v,v as r,x as p,y as m}from"./chunk-6WTTME43.js";var B=(i,e,n)=>({"stock-green":i,"stock-red":e,"stock-orange":n});function L(i,e){if(i&1&&(c(0,"span",5),d(1),S(2,"discountedPrice"),o()),i&2){let n,t=w();r(),l(" $",E(2,1,t.product().price,(n=t.product())==null?null:n.discountPercentage)," ")}}var f=class i{constructor(e,n){this.cartService=e;this.router=n}product=T();discountedPrice=this.product()?.price??0;get stars(){return"\u2605\u2605\u2605\u2605\u2605".slice(0,Math.round(this.product().rating||0))}addCart(){this.cartService.addToCart(this.product())}isInCart(){return!!this.product&&this.cartService.cartItems().some(e=>e.id===this.product().id)}goToDetails(e){this.product()&&e?this.router.navigate(["/product",e]):console.error("Product or product id is missing:",this.product())}static \u0275fac=function(n){return new(n||i)(p(F),p(z))};static \u0275cmp=m({type:i,selectors:[["app-card"]],inputs:{product:[1,"product"]},decls:17,vars:14,consts:[[3,"ngClass"],[2,"cursor","pointer",3,"click"],[3,"src","alt"],[1,"price"],[1,"main-price"],[1,"discount-price"],[1,"stars"]],template:function(n,t){if(n&1&&(c(0,"article")(1,"p",0),d(2),o(),c(3,"figure",1),C("click",function(){return t.goToDetails(t.product().id)}),u(4,"img",2),o(),c(5,"h3"),d(6),o(),c(7,"p"),d(8),o(),c(9,"div",3)(10,"p",4),d(11),o(),M(12,L,3,4,"span",5),o(),c(13,"div",6),d(14),o(),c(15,"button",1),C("click",function(){return t.addCart()}),d(16),o()()),n&2){let a,_,P,b;r(),s("ngClass",I(10,B,((a=t.product())==null?null:a.availabilityStatus)==="In Stock",((a=t.product())==null?null:a.availabilityStatus)==="Out Of Stock",((a=t.product())==null?null:a.availabilityStatus)==="Low Stock")),r(),l(" ",(_=t.product())==null?null:_.availabilityStatus," "),r(2),s("src",(P=t.product())==null?null:P.thumbnail,v)("alt",t.product().title),r(2),g(t.product().title),r(2),g(t.product().description),r(3),l("",t.product().price,"$"),r(),O((b=t.product())!=null&&b.discountPercentage?12:-1),r(2),g(t.stars),r(2),l(" ",t.isInCart()?"Remove from Cart":"Add to Cart"," ")}},dependencies:[j,D],styles:["article[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:18px;box-shadow:0 2px 16px #00000012;text-align:left;padding:1.5rem 1.5rem 1.25rem;gap:.75rem;transition:box-shadow .2s;position:relative;min-height:420px;max-height:450px;display:flex;flex-direction:column;justify-content:space-between}article[_ngcontent-%COMP%]   p[ngclass][_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .stock-green[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .stock-red[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .stock-orange[_ngcontent-%COMP%]{position:absolute;top:1.25rem;left:1.25rem;font-size:.95rem;font-weight:600;min-width:90px;text-align:center;z-index:2}article[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}article[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .main-price[_ngcontent-%COMP%]{font-size:1.1rem;color:#888;text-decoration:line-through;margin-right:.5rem}article[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .discount-price[_ngcontent-%COMP%]{font-size:1.25rem;color:#222;font-weight:700;margin-left:.25rem}article[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{color:#2ecc40;font-size:1.1rem;margin-bottom:.25rem}article[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#1a4d2e;color:#fff;border:none;border-radius:8px;padding:.75em 0;font-size:1.1rem;font-weight:600;margin-top:.5rem;cursor:pointer;transition:background .2s}article[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#145c2e}article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;line-clamp:3;box-orient:vertical}figure[_ngcontent-%COMP%]{margin:0 0 .5rem;width:100%;display:flex;justify-content:center;align-items:center;background:#f7f7f7;border-radius:12px;height:180px;overflow:hidden}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:160px;object-fit:contain}h3[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;margin:.5rem 0 .25rem;color:#222}.stock-green[_ngcontent-%COMP%]{background:#2ecc40;color:#fff;padding:.25em .75em;border-radius:6px}.stock-red[_ngcontent-%COMP%]{background:#e74c3c;color:#fff;padding:.25em .75em;border-radius:6px}.stock-orange[_ngcontent-%COMP%]{background:#ff9800;color:#fff;padding:.25em .75em;border-radius:6px}"]})};function A(i,e){if(i&1&&u(0,"app-card",1),i&2){let n=e.$implicit;s("product",n)}}var R=class i{constructor(e){this.http=e}data$;products=h([]);ngOnInit(){this.http.getProducts().subscribe({next:e=>{this.products.set(e.products),console.log(this.products())},error:e=>console.log("Failed to Load due to:",e)})}static \u0275fac=function(n){return new(n||i)(p(N))};static \u0275cmp=m({type:i,selectors:[["app-products-container"]],decls:3,vars:0,consts:[[1,"container"],[3,"product"]],template:function(n,t){n&1&&(c(0,"section",0),k(1,A,1,1,"app-card",1,x),o()),n&2&&(r(),y(t.products()))},dependencies:[f],styles:["section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}section[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{width:24%}"]})};export{R as ProductsContainer};
